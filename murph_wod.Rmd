---
title: "Sub-40 Murph Progression"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(pacman)
pacman::p_load(dplyr,tidyr,lubridate,DT,data.table)
```

# Load CSV files


```{r }

csv_files = list.files(path = "data",full.names = T)
```

# Append Files

```{r}

df = 
  rbindlist(lapply(csv_files,function(x) {
  date = ymd(gsub("data/","",x))
  read.csv(x) %>% 
    as_tibble() %>% 
    dplyr::mutate(date=date) %>% 
    dplyr::relocate(date)
}))

```

# Explore Datatable

```{r}

df %>% 
  dplyr::mutate(Time=gsub("\\..$","",Time)) %>% 
  dplyr::mutate(Cumulative.Time=gsub("\\..$","",Cumulative.Time)) %>% 
  dplyr::mutate(Time=paste0("0:",Time)) %>% 
  dplyr::mutate(Cumulative.Time=paste0("0:",Cumulative.Time)) %>% 
  dplyr::mutate(Time=hms(Time)) %>% 
  dplyr::mutate(Cumulative.Time=hms(Cumulative.Time))
  DT::datatable(options = list(scrollX = TRUE))

```

# Lap dictionary

```{r}

runs = rep("400m run",4)

cindys = t(outer(paste0("Double-Cindy #",seq(1,10)),c(" - 10 Pull-Ups"," - 20 Push-ups"," - 30 Squats"), FUN = "paste0"))
dim(cindys) <- NULL

lap_dictionary = data.frame(Description = c(runs,cindys,runs)) %>% 
  dplyr::mutate(Laps = paste0(seq(nrow(.))))

```


```{r}

lap_dictionary %>% 
  left_join(df)

```

